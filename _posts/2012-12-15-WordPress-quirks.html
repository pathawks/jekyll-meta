---
title: WordPress quirks
layout: post
---
I am getting really aggravated by WordPress's quirks.

<script src="https://gist.github.com/4301644.js"></script>
<noscript>
<link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css" />
<div id="gist4301644" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">
  <div class="data">
    <table cellpadding="0" cellspacing="0" class="lines highlight">
      <tbody><tr>
        <td class="line_numbers">
          <span id="file-quirkpress-php-L1" rel="file-quirkpress-php-L1">1</span>
          <span id="file-quirkpress-php-L2" rel="file-quirkpress-php-L2">2</span>
          <span id="file-quirkpress-php-L3" rel="file-quirkpress-php-L3">3</span>
          <span id="file-quirkpress-php-L4" rel="file-quirkpress-php-L4">4</span>
          <span id="file-quirkpress-php-L5" rel="file-quirkpress-php-L5">5</span>
          <span id="file-quirkpress-php-L6" rel="file-quirkpress-php-L6">6</span>
          <span id="file-quirkpress-php-L7" rel="file-quirkpress-php-L7">7</span>
          <span id="file-quirkpress-php-L8" rel="file-quirkpress-php-L8">8</span>
          <span id="file-quirkpress-php-L9" rel="file-quirkpress-php-L9">9</span>
          <span id="file-quirkpress-php-L10" rel="file-quirkpress-php-L10">10</span>
          <span id="file-quirkpress-php-L11" rel="file-quirkpress-php-L11">11</span>
          <span id="file-quirkpress-php-L12" rel="file-quirkpress-php-L12">12</span>
          <span id="file-quirkpress-php-L13" rel="file-quirkpress-php-L13">13</span>
          <span id="file-quirkpress-php-L14" rel="file-quirkpress-php-L14">14</span>
          <span id="file-quirkpress-php-L15" rel="file-quirkpress-php-L15">15</span>
          <span id="file-quirkpress-php-L16" rel="file-quirkpress-php-L16">16</span>
          <span id="file-quirkpress-php-L17" rel="file-quirkpress-php-L17">17</span>
          <span id="file-quirkpress-php-L18" rel="file-quirkpress-php-L18">18</span>
          <span id="file-quirkpress-php-L19" rel="file-quirkpress-php-L19">19</span>
          <span id="file-quirkpress-php-L20" rel="file-quirkpress-php-L20">20</span>
          <span id="file-quirkpress-php-L21" rel="file-quirkpress-php-L21">21</span>
          <span id="file-quirkpress-php-L22" rel="file-quirkpress-php-L22">22</span>
          <span id="file-quirkpress-php-L23" rel="file-quirkpress-php-L23">23</span>
          <span id="file-quirkpress-php-L24" rel="file-quirkpress-php-L24">24</span>
          <span id="file-quirkpress-php-L25" rel="file-quirkpress-php-L25">25</span>
          <span id="file-quirkpress-php-L26" rel="file-quirkpress-php-L26">26</span>
          <span id="file-quirkpress-php-L27" rel="file-quirkpress-php-L27">27</span>
          <span id="file-quirkpress-php-L28" rel="file-quirkpress-php-L28">28</span>
          <span id="file-quirkpress-php-L29" rel="file-quirkpress-php-L29">29</span>
          <span id="file-quirkpress-php-L30" rel="file-quirkpress-php-L30">30</span>
          <span id="file-quirkpress-php-L31" rel="file-quirkpress-php-L31">31</span>
          <span id="file-quirkpress-php-L32" rel="file-quirkpress-php-L32">32</span>
          <span id="file-quirkpress-php-L33" rel="file-quirkpress-php-L33">33</span>
          <span id="file-quirkpress-php-L34" rel="file-quirkpress-php-L34">34</span>
          <span id="file-quirkpress-php-L35" rel="file-quirkpress-php-L35">35</span>
          <span id="file-quirkpress-php-L36" rel="file-quirkpress-php-L36">36</span>
          <span id="file-quirkpress-php-L37" rel="file-quirkpress-php-L37">37</span>
          <span id="file-quirkpress-php-L38" rel="file-quirkpress-php-L38">38</span>
          <span id="file-quirkpress-php-L39" rel="file-quirkpress-php-L39">39</span>
          <span id="file-quirkpress-php-L40" rel="file-quirkpress-php-L40">40</span>
          <span id="file-quirkpress-php-L41" rel="file-quirkpress-php-L41">41</span>
          <span id="file-quirkpress-php-L42" rel="file-quirkpress-php-L42">42</span>
          <span id="file-quirkpress-php-L43" rel="file-quirkpress-php-L43">43</span>
          <span id="file-quirkpress-php-L44" rel="file-quirkpress-php-L44">44</span>
          <span id="file-quirkpress-php-L45" rel="file-quirkpress-php-L45">45</span>
          <span id="file-quirkpress-php-L46" rel="file-quirkpress-php-L46">46</span>
        </td>
        <td class="line_data" width="100%">
          <pre><div class="line" id="file-quirkpress-php-LC1"><span class="x">/*</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC2"><span class="x"> * WTF DOES THIS CODE DO?</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC3"><span class="x"> *</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC4"><span class="x"> * When using get_adjacent_post(), there is no way to restrict posts to one or two categories,</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC5"><span class="x"> * if the categories in question are not identical to the current post. We get arround that by</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC6"><span class="x"> * having requesting a list of EVERY CATEGORY EXCEPT the one in question, and then pass that</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC7"><span class="x"> * as our list of 'excluded' categories.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC8"><span class="x"> *</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC9"><span class="x"> * Take a deep breath.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC10"><span class="x"> *</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC11"><span class="x"> * Yes, it's freaking stupid, but it works.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC12"><span class="x"> *</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC13"><span class="x"> */</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC14"><span class="x">$post_categories = get_categories( array(</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC15"><span class="x">  'exclude' =&gt; array( 1, 6 ), // Page and chapter categories</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC16"><span class="x">	'orderby' =&gt; 'id',</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC17"><span class="x">) );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC18"><span class="x">$post_categories = wp_list_pluck( $post_categories, 'cat_ID' );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC19">&nbsp;</div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC20"><span class="x">$prev_post   = get_previous_post( FALSE, $post_categories );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC21"><span class="x">$next_post   =     get_next_post( FALSE, $post_categories );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC22">&nbsp;</div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC23"><span class="x">/*</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC24"><span class="x"> * For reasons that are not obvious to me,</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC25"><span class="x"> * while `get_previous_post` and `get_next_post` return a single</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC26"><span class="x"> * $post object ready to rock, `get_boundary_post` returns an</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC27"><span class="x"> * ARRAY with a single WordPress post. So that we can use them in</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC28"><span class="x"> * similar ways, we have to extract the $post from the returned ARRAY.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC29"><span class="x"> * http://core.trac.wordpress.org/ticket/22950</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC30"><span class="x"> */</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC31"><span class="x">$first_post  = array_shift( get_boundary_post( FALSE, $page_categories, TRUE ) );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC32"><span class="x">$latest_post = array_shift( get_boundary_post( FALSE, $page_categories, FALSE ) );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC33">&nbsp;</div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC34"><span class="x">if ( ! is_single() || is_attachment() ) {</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC35"><span class="x">/*</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC36"><span class="x"> * We'll have to impliment our own workaround for WordPress's broken behavior</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC37"><span class="x"> *</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC38"><span class="x"> * I hate this code.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC39"><span class="x"> * I hate that I have to include it.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC40"><span class="x"> * I hope I can remove it with a future WordPress update.</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC41"><span class="x"> *</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC42"><span class="x"> * http://core.trac.wordpress.org/ticket/22957</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC43"><span class="x"> */</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC44"><span class="x">	$first_post  = array_shift( get_posts( array('numberposts' =&gt; 1, 'category__not_in' =&gt; $page_categories, 'order' =&gt; 'ASC',  'update_post_term_cache' =&gt; false, 'update_post_meta_cache' =&gt; false) ) );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC45"><span class="x">	$latest_post = array_shift( get_posts( array('numberposts' =&gt; 1, 'category__not_in' =&gt; $page_categories, 'order' =&gt; 'DESC', 'update_post_term_cache' =&gt; false, 'update_post_meta_cache' =&gt; false) ) );</span></div></pre>
          <pre><div class="line" id="file-quirkpress-php-LC46"><span class="x">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>
        </div>
        <div class="gist-meta">
          <a href="https://gist.github.com/raw/4301644/0edf3d59b7f493e61d132ab366f8aa56dabb4d9e/QuirkPress.php" style="float:right">view raw</a>
          <a href="https://gist.github.com/4301644#file-quirkpress-php" style="float:right; margin-right:10px; color:#666;">QuirkPress.php</a>
          <a href="https://gist.github.com/4301644">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
        </div>
      </div>
</div>
</noscript>

<p>
<a href="http://core.trac.wordpress.org/ticket/22950" title="Ticket #22950">Ticket #22950: get_boundary_post Does not return single post object</a><br />
<a href="http://core.trac.wordpress.org/ticket/22957" title="Ticket #22957">Ticket #22957: get_boundary_post Only works from a single page</a>
</p>
